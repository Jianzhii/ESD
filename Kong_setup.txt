#################################################
Steps to set up all API Gateway routing (Kong)
#################################################

# This is a one-time only set up as all your configuration will be saved to the postgre container so do not remove your postgre container if you are not using it.

1: Docker compose up all Micro-services to start up the services
2. In Chrome, go to http://localhost:1337 and register an account in konga if this is your first time going into konga, else it should be logged in already
3. Following lab8, connect Konga to Kong with the following inputs
    Name: default
    Kong Admin URL: http://kong:8001



# Set up for user profile micro service
4. Click service and create a new service with the following parameters:
    Name: Userprofile
    URL: http://user_profile:5008/userprofile
5. After service is created, click into routes and click add a route with the following parameters:
    Path: /api/v1/userprofile
    Methods: GET

# Set up for stock info micro service
6. Click service and create a new service with the following parameters:
    Name: stock_info
    URL: http://yahoo_friend:5900/stock
7. After service is created, click into routes and click add a route with the following parameters:
    Path: /api/v1/stock
    Methods: GET

# Set up for market summary micro service
8. Click service and create a new service with the following parameters:
    Name: market_summary
    URL: http://yahoo_friend:5900/market
9. After service is created, click into routes and click add a route with the following parameters:
    Path: /api/v1/market
    Methods: GET

# Set up for buy stocks micro service
10. Click service and create a new service with the following parameters:
    Name: buy_stocks
    URL: http://order_management:5100/order/buy
11. After service is created, click into routes and click add a route with the following parameters:
    Path: /api/v1/order/buy
    Methods: PUT OPTIONS

# Set up for sell stocks micro service
12. Click service and create a new service with the following parameters:
    Name: sell_stocks
    URL: http://order_management:5100/order/sell
13. After service is created, click into routes and click add a route with the following parameters:
    Path: /api/v1/order/sell
    Methods: PUT OPTIONS

    
# Set up for user authentication micro service
14. Click service and create a new service with the following parameters:
    Name: authUser
    URL: http://auth_user:5200/auth
15. After service is created, click into routes and click add a route with the following parameters:
    Path: /api/v1/auth
    Methods: POST OPTIONS

# Set up for funds micro service
16. Click service and create a new service with the following parameters:
    Name: funds
    URL: http://funds:5002/funds
17. After service is created, click into routes and click add a route with the following parameters:
    Path: /api/v1/funds
    Methods: PUT OPTIONS


18. After setting all the routes in Konga, go to all html files (home.html, stock.html, portfolio.html) and change all the URLs to the API Gateway URL.